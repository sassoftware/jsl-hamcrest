<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>UtBufferingReporter</title><link rel="stylesheet" type="text/css" href="../../styles/main.css" /><script type="text/javascript" src="../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.0.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Topic336"></a><div class="CTopic TClass LJSL first">
 <div class="CTitle">UtBufferingReporter</div>
 <div class="NDClassPrototype HasParents" id="NDClassPrototype336"><a class="CPEntry Parent TClass" href="../../index.html#JSLClass:UtReporter" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,223);" onmouseout="NDContentPage.OnLinkMouseOut(event);" ><div class="CPName">UtReporter</div></a><div class="CPEntry TClass Current"><div class="CPName">UtBufferingReporter</div></div></div>
 <div class="CBody"><p>Holds buffer of events until release is called.</p></div>
</div>

<a name="Functions"></a><a name="Topic337"></a><div class="CTopic TGroup LJSL">
 <div class="CTitle">Functions</div>
</div>

<a name="ut_test_log_benchmark_label"></a><a name="Topic338"></a><div class="CTopic TFunction LJSL">
 <div class="CTitle">ut test log benchmark label</div>
 <div id="NDPrototype338" class="NDPrototype WideForm CStyle"><table><tr><td class="PBeforeParameters">ut test log benchmark label(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PModifierQualifier first"><span class="SHKeyword">string</span> case_name&nbsp;</td><td class="PType"><span class="SHKeyword">string</span>&nbsp;</td><td class="PName last">test_name&nbsp;</td></tr></table></td><td class="PAfterParameters">);</td></tr></table></div>
 <div class="CBody"><p>Returns	the label used when a test log benchmark fails. This is an extension point for ut test and can be overwritten to customize the label.</p></div>
</div>

<a name="ut_test"></a><a name="Topic339"></a><div class="CTopic TFunction LJSL">
 <div class="CTitle">ut test</div>
 <div id="NDPrototype339" class="NDPrototype WideForm CStyle"><table><tr><td class="PBeforeParameters">ut test(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><a href="../../index.html#JSLClass:UtTestCaseFixture" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,320);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >UtTestCaseFixture</a>&nbsp;</td><td class="PName">test_case,</td><td></td><td class="last"></td></tr><tr><td class="PType first"><span class="SHKeyword">string</span>&nbsp;</td><td class="PName">test_name,</td><td></td><td class="last"></td></tr><tr><td class="PType first">expression&nbsp;</td><td class="PName">test_expr,</td><td></td><td class="last"></td></tr><tr><td class="PType first"><a href="../../index.html#JSLClass:UtLogBenchmark" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,331);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >UtLogBenchmark</a>&nbsp;</td><td class="PName">log_benchmark&nbsp;</td><td class="PDefaultValueSeparator">=&nbsp;</td><td class="PDefaultValue last">ut log bench( <span class="SHNumber">1</span>, <span class="SHString">&quot;&quot;</span> )</td></tr></table></td><td class="PAfterParameters">);</td></tr></table></div>
 <div class="CBody"><p>Run a test expression. Runs any given setup and tear down expressions.&nbsp; Reports any unexpected exceptions as failures.</p><p>The log benchmark argument determines if the log is captured and what is asserted about the captured log (if anything). The default is managed by the <a href="../../index.html#JSLClass:UtBufferingReporter:ut_log_bench" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,340);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut log bench</a> and <a href="../../index.html#JSLClass:UtBufferingReporter:ut_log_bench_default" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,342);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut log bench default</a>.</p><div class="CHeading">Arguments</div><table class="CDefinitionList"><tr><td class="CDLEntry">test_case<div class="CDLParameterType"><a href="../../index.html#JSLClass:UtTestCaseFixture" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,320);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >UtTestCaseFixture</a></div></td><td class="CDLDefinition"><p>name of test case or class object reference to test case. See <a href="../../index.html#File:Core/TestCase.jsl:ut_test_case" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,334);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut test case</a>.</p></td></tr><tr><td class="CDLEntry">test_name<div class="CDLParameterType"><span class="SHKeyword">string</span></div></td><td class="CDLDefinition"><p>name of the test.</p></td></tr><tr><td class="CDLEntry">test_expr<div class="CDLParameterType">expression</div></td><td class="CDLDefinition"><p>expression to run test.</p></td></tr><tr><td class="CDLEntry">log_benchmark<div class="CDLParameterType"><a href="../../index.html#JSLClass:UtLogBenchmark" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,331);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >UtLogBenchmark</a></div></td><td class="CDLDefinition"><p>if and how to benchmark the log</p></td></tr></table><div class="CHeading">Returns</div><p>1 if all tests succeeded, otherwise 0.</p><div class="CHeading">Example</div><pre>ut test( <span class="SHString">&quot;TC #5&quot;</span>, <span class="SHString">&quot;addition&quot;</span>,<br />    Expr(<br />        ut assert that( Expr( <span class="SHNumber">5</span> + <span class="SHNumber">6</span> ), <span class="SHNumber">11</span> );<br />        ut assert that( Expr( <span class="SHNumber">5</span> + <span class="SHNumber">5</span> ), <span class="SHNumber">10</span>, <span class="SHString">&quot;my assert level comment&quot;</span> );<br />    ),<br />    ut log bench( <span class="SHNumber">1</span>, <span class="SHString">&quot;&quot;</span> ) <span class="SHComment">// Capture the log and assert that it is empty</span><br />);</pre></div>
</div>

<a name="ut_log_bench"></a><a name="Topic340"></a><div class="CTopic TFunction LJSL">
 <div class="CTitle">ut log bench</div>
 <div id="NDPrototype340" class="NDPrototype WideForm CStyle"><table><tr><td class="PBeforeParameters">ut log bench(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><span class="SHKeyword">integer</span>&nbsp;</td><td class="PName">do_log_bench&nbsp;</td><td class="PDefaultValueSeparator">=&nbsp;</td><td class="PDefaultValue last">ut_log_bench_default,</td></tr><tr><td class="PType first"><a href="../../index.html#JSLClass:UtMatcher" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,234);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >UtMatcher</a>&nbsp;</td><td class="PName">matcher&nbsp;</td><td class="PDefaultValueSeparator">=&nbsp;</td><td class="PDefaultValue last"><span class="SHString">&quot;&quot;</span></td></tr></table></td><td class="PAfterParameters">);</td></tr></table></div>
 <div class="CBody"><p>do log bench args -&nbsp; 0: Capture the log and throw it away (no benchmark, matcher not run) -&nbsp; 1: Capture the log and assert that contents satisfy the matcher - -1: Do not capture the log (no benchmark, matcher not run)</p><p>Factory function for <a href="../../index.html#JSLClass:UtLogBenchmark" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,331);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >UtLogBenchmark</a></p><div class="CHeading">Arguments</div><table class="CDefinitionList"><tr><td class="CDLEntry">do_log_bench<div class="CDLParameterType"><span class="SHKeyword">integer</span></div></td><td class="CDLDefinition"><p>See description above.</p></td></tr><tr><td class="CDLEntry">matcher<div class="CDLParameterType"><a href="../../index.html#JSLClass:UtMatcher" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,234);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >UtMatcher</a></div></td><td class="CDLDefinition"><p>Used for assertion on contents of log (when benchmarked)</p></td></tr></table></div>
</div>

<a name="Variables"></a><a name="Topic341"></a><div class="CTopic TGroup LJSL">
 <div class="CTitle">Variables</div>
</div>

<a name="ut_log_bench_default"></a><a name="Topic342"></a><div class="CTopic TVariable LJSL">
 <div class="CTitle">ut log bench default</div>
</div>

<a name="ut_log_bench_off"></a><a name="Topic343"></a><div class="CTopic TVariable LJSL">
 <div class="CTitle">ut log bench off</div>
</div>

<a name="ut_log_bench_no_capture"></a><a name="Topic344"></a><div class="CTopic TVariable LJSL">
 <div class="CTitle">ut log bench no capture</div>
</div>

<a name="ut_log_bench_on"></a><a name="Topic345"></a><div class="CTopic TVariable LJSL">
 <div class="CTitle">ut log bench on</div>
</div>

<a name="ut_test_registered_assertions"></a><a name="Topic346"></a><div class="CTopic TVariable LJSL">
 <div class="CTitle">ut test registered assertions</div>
</div>

<a name="Functions(2)"></a><a name="Topic347"></a><div class="CTopic TGroup LJSL">
 <div class="CTitle">Functions</div>
</div>

<a name="ut_test_register_assertion"></a><a name="Topic348"></a><div class="CTopic TFunction LJSL">
 <div class="CTitle">ut test register assertion</div>
 <div class="CBody"><p>Register a function to be handled within <a href="../../index.html#JSLClass:UtBufferingReporter:ut_test" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,339);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut test</a>.</p><p>Allows <a href="../../index.html#JSLClass:UtBufferingReporter:ut_test" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,339);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut test</a> to decorate registered assertions. All arguments will be passed verbatim except for a label argument, which will be transformed by <a href="../../index.html#JSLClass:UtBufferingReporter:ut_test" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,339);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut test</a> using <a href="../../index.html#File:Core/Utils.jsl:ut_concat_test_label" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,306);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut concat test label</a> with the test case name, test name, and number of assertions.</p><p>The given args will be the signature of the decorator function. This should match the signature of your original assertion function. Variable names are not important except for label. However, defaults are important and should match.</p><p>Your assertion function must return a boolean 1 or 0 and should send results to <a href="../../index.html#File:Core/Core.jsl:ut_global_reporter" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,263);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut global reporter</a>.</p><p>The end result of a registered assertion function is the ability to run your assertion inside of a test.&nbsp; It will have an augmented label and the assertion result will affect the result of the entire test.</p><div class="CHeading">Example</div><pre><span class="SHKeyword">my</span> assertion = Function( {truth, label=<span class="SHString">&quot;&quot;</span>},<br />    <span class="SHKeyword">do</span> stuff;<br />    ut global reporter:add xxx(...);<br />    Random Integer( <span class="SHNumber">0</span>, <span class="SHNumber">1</span> )<br />);<br />ut test <span class="SHKeyword">register</span> assertion( <span class="SHString">&quot;my assertion&quot;</span>, {truth, label=<span class="SHString">&quot;&quot;</span>} );</pre></div>
</div>

<a name="ut_test_assertion_decorator"></a><a name="Topic349"></a><div class="CTopic TFunction LJSL">
 <div class="CTitle">ut test assertion decorator</div>
 <div class="CBody"><p>Builds a local assignment of an assertion function for decorating within <a href="../../index.html#JSLClass:UtBufferingReporter:ut_test" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,339);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut test</a>.</p></div>
</div>

<a name="ut_expand_test"></a><a name="Topic350"></a><div class="CTopic TFunction LJSL last">
 <div class="CTitle">ut expand test</div>
 <div id="NDPrototype350" class="NDPrototype WideForm CStyle"><table><tr><td class="PBeforeParameters">ut expand test(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><a href="../../index.html#JSLClass:UtTestCaseFixture" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,320);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >UtTestCaseFixture</a>&nbsp;</td><td class="PName">test_case,</td><td></td><td class="last"></td></tr><tr><td class="PType first"><span class="SHKeyword">string</span>&nbsp;</td><td class="PName">_dummy1,</td><td></td><td class="last"></td></tr><tr><td class="PType first">expression&nbsp;</td><td class="PName">test_expr,</td><td></td><td class="last"></td></tr><tr><td class="PType first">missing&nbsp;</td><td class="PName">_dummy2&nbsp;</td><td class="PDefaultValueSeparator">=&nbsp;</td><td class="PDefaultValue last">.</td></tr></table></td><td class="PAfterParameters">);</td></tr></table></div>
 <div class="CBody"><p>Accepts same arguments as <a href="../../index.html#JSLClass:UtBufferingReporter:ut_test" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,339);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut test</a>, but returns you an expression with all parts expanded. Might be useful for debugging your script.</p><div class="CHeading">Arguments</div><table class="CDefinitionList"><tr><td class="CDLEntry">test_case<div class="CDLParameterType"><a href="../../index.html#JSLClass:UtTestCaseFixture" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,320);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >UtTestCaseFixture</a></div></td><td class="CDLDefinition"><p>test case or string used</p></td></tr><tr><td class="CDLEntry">_dummy1<div class="CDLParameterType"><span class="SHKeyword">string</span></div></td><td class="CDLDefinition"><p>variable is not used, but is kept as placeholder to match <a href="../../index.html#JSLClass:UtBufferingReporter:ut_test" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,339);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut test</a></p></td></tr><tr><td class="CDLEntry">test_expr<div class="CDLParameterType">expression</div></td><td class="CDLDefinition"><p>the main test expression</p></td></tr><tr><td class="CDLEntry">_dummy2<div class="CDLParameterType">missing</div></td><td class="CDLDefinition"><p>variable is not used, but is kept as placeholder to match <a href="../../index.html#JSLClass:UtBufferingReporter:ut_test" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,339);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ut test</a></p></td></tr></table><div class="CHeading">Example</div><pre>test <span class="SHKeyword">case</span> = ut test <span class="SHKeyword">case</span>( <span class="SHString">&quot;Sample test case&quot;</span> )<br />    &lt;&lt; Setup( Expr( dt = Open( <span class="SHString">&quot;$SAMPLE_DATA\Big Class.jmp&quot;</span> ); ) )<br />    &lt;&lt; Teardown( Expr( Close( dt, NoSave ); ) );<br /><br />ut expand test( test <span class="SHKeyword">case</span>, <span class="SHString">&quot;test level comment&quot;</span>,<br />    Expr(<br />        dt &lt;&lt; <span class="SHKeyword">new</span> column( <span class="SHString">&quot;Test&quot;</span>, Formula( Row() ) );<br />        ut assert that( Expr( dt:Test &lt;&lt; Get Values ), (<span class="SHNumber">1</span>::<span class="SHNumber">40</span>)`, <span class="SHString">&quot;my assert level comment&quot;</span> );<br />    )<br />);</pre></div>
</div>

</body></html>